<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Getting Started with EcoExtract • ecoextract</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started with EcoExtract">
</head>
<body>
<p>








  pkgdown/mermaid.html

  

  </p>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ecoextract</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html" aria-label="Home"><span class="fa fa-home"></span></a></li>
<li class="active nav-item"><a class="nav-link" href="../articles/getting-started.html">Getting Started</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/ecoextract-workflow.html">Workflow</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/configuration.html">Configuration</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/testing.html">Testing</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/n8layman/ecoextract/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Getting Started with EcoExtract</h1>
                        <h4 data-toc-skip class="author">EcoExtract
Team</h4>
            
            <h4 data-toc-skip class="date">2026-02-10</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/n8layman/ecoextract/blob/main/vignettes/getting-started.Rmd" class="external-link"><code>vignettes/getting-started.Rmd</code></a></small>
      <div class="d-none name"><code>getting-started.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p><strong>EcoExtract</strong> is an automated system for extracting
structured data from scientific literature PDFs. This tutorial will walk
you through the complete workflow from installation to exporting
validated data.</p>
<div class="section level3">
<h3 id="what-youll-learn">What You’ll Learn<a class="anchor" aria-label="anchor" href="#what-youll-learn"></a>
</h3>
<ul>
<li>How to install EcoExtract and configure API keys</li>
<li>How to process PDF documents and extract data</li>
<li>How to launch the interactive review app</li>
<li>How to review and validate extracted data</li>
<li>How to export your results and calculate accuracy metrics</li>
</ul>
</div>
<div class="section level3">
<h3 id="the-three-package-ecosystem">The Three-Package Ecosystem<a class="anchor" aria-label="anchor" href="#the-three-package-ecosystem"></a>
</h3>
<p>EcoExtract works as part of a three-package ecosystem:</p>
<ol style="list-style-type: decimal">
<li>
<strong><a href="https://github.com/n8layman/ohseer" class="external-link">ohseer</a></strong> - OCR
processing for PDFs
<ul>
<li>Converts PDFs to markdown with embedded images</li>
<li>Uses Tensorlake for vision-based text extraction</li>
<li>Handles tables, figures, and complex layouts</li>
</ul>
</li>
<li>
<strong><a href="https://github.com/n8layman/ecoextract" class="external-link">ecoextract</a></strong> -
Data extraction pipeline (this package)
<ul>
<li>Extracts publication metadata</li>
<li>Extracts structured records using LLM (Claude)</li>
<li>Optional refinement pass</li>
<li>SQLite database storage with full audit trail</li>
</ul>
</li>
<li>
<strong><a href="https://github.com/n8layman/ecoreview" class="external-link">ecoreview</a></strong> -
Human review Shiny app
<ul>
<li>Interactive review interface</li>
<li>Edit, add, or delete records</li>
<li>Automatic accuracy calculation</li>
<li>Edit tracking and audit trail</li>
</ul>
</li>
</ol>
</div>
<div class="section level3">
<h3 id="prerequisites">Prerequisites<a class="anchor" aria-label="anchor" href="#prerequisites"></a>
</h3>
<ul>
<li>R version 4.1.0 or higher</li>
<li>RStudio (recommended)</li>
<li>API keys for Tensorlake (OCR) and Anthropic Claude (extraction)</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="section level3">
<h3 id="step-1-install-packages">Step 1: Install Packages<a class="anchor" aria-label="anchor" href="#step-1-install-packages"></a>
</h3>
<p>Install all three packages from GitHub:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Option 1: Using pak (recommended)</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"n8layman/ohseer"</span><span class="op">)</span>      <span class="co"># OCR processing</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"n8layman/ecoextract"</span><span class="op">)</span>  <span class="co"># Data extraction</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"n8layman/ecoreview"</span><span class="op">)</span>   <span class="co"># Review app (optional)</span></span>
<span></span>
<span><span class="co"># Option 2: Using devtools</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"n8layman/ohseer"</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"n8layman/ecoextract"</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"n8layman/ecoreview"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="step-2-configure-api-keys">Step 2: Configure API Keys<a class="anchor" aria-label="anchor" href="#step-2-configure-api-keys"></a>
</h3>
<p>EcoExtract requires API keys for OCR (Tensorlake) and data extraction
(Anthropic Claude).</p>
<div class="section level4">
<h4 id="get-api-keys">Get API Keys<a class="anchor" aria-label="anchor" href="#get-api-keys"></a>
</h4>
<ul>
<li>
<strong>Tensorlake</strong> (for OCR): <a href="https://www.tensorlake.ai/" class="external-link uri">https://www.tensorlake.ai/</a>
</li>
<li>
<strong>Anthropic Claude</strong> (for extraction): <a href="https://console.anthropic.com/" class="external-link uri">https://console.anthropic.com/</a>
</li>
</ul>
</div>
<div class="section level4">
<h4 id="set-up-your-keys">Set Up Your Keys<a class="anchor" aria-label="anchor" href="#set-up-your-keys"></a>
</h4>
<p><strong>Important: Before creating your <code>.env</code> file,
verify it’s in <code>.gitignore</code>:</strong></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># Check that .env is in .gitignore</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="fu">grep</span> <span class="st">"^\.env$"</span> .gitignore</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="co"># If not found, add it NOW before creating the file:</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="bu">echo</span> <span class="st">".env"</span> <span class="op">&gt;&gt;</span> .gitignore</span></code></pre></div>
<p>Create a <code>.env</code> file in your project root:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co"># .env file contents:</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="va">ANTHROPIC_API_KEY</span><span class="op">=</span>sk-ant-api03-your-key-here</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="va">TENSORLAKE_API_KEY</span><span class="op">=</span>your-tensorlake-key-here</span></code></pre></div>
<p><strong>Verify before committing:</strong></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># This should show no output if .env is properly ignored:</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="fu">git</span> status <span class="kw">|</span> <span class="fu">grep</span> <span class="st">".env"</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="load-your-keys">Load Your Keys<a class="anchor" aria-label="anchor" href="#load-your-keys"></a>
</h4>
<p>The <code>.env</code> file is automatically loaded when you start R
in the project directory. Alternatively:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Option 1: Load from .env file</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/readRenviron.html" class="external-link">readRenviron</a></span><span class="op">(</span><span class="st">".env"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Option 2: Set directly in R</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>ANTHROPIC_API_KEY <span class="op">=</span> <span class="st">"your_key_here"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>TENSORLAKE_API_KEY <span class="op">=</span> <span class="st">"your_key_here"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Verify keys are loaded</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"ANTHROPIC_API_KEY"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"TENSORLAKE_API_KEY"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="step-3-verify-installation">Step 3: Verify Installation<a class="anchor" aria-label="anchor" href="#step-3-verify-installation"></a>
</h3>
<p>Test that everything loads correctly:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/n8layman/ecoextract" class="external-link">ecoextract</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">ecoreview</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check that functions are available</span></span>
<span><span class="op">?</span><span class="va">process_documents</span></span>
<span><span class="op">?</span><span class="va">run_review_app</span></span></code></pre></div>
<p>If everything loads without errors, you’re ready to go!</p>
</div>
</div>
<div class="section level2">
<h2 id="quick-start-process-documents">Quick Start: Process Documents<a class="anchor" aria-label="anchor" href="#quick-start-process-documents"></a>
</h2>
<div class="section level3">
<h3 id="the-four-step-pipeline">The Four-Step Pipeline<a class="anchor" aria-label="anchor" href="#the-four-step-pipeline"></a>
</h3>
<p>EcoExtract orchestrates a four-step extraction pipeline:</p>
<ol style="list-style-type: decimal">
<li>
<strong>OCR Processing</strong> (via ohseer) - Convert PDF to
markdown text with embedded images</li>
<li>
<strong>Metadata Extraction</strong> - Extract publication metadata
(title, authors, DOI, etc.)</li>
<li>
<strong>Data Extraction</strong> - Extract structured records using
LLM according to your schema</li>
<li>
<strong>Refinement</strong> (optional) - Enhance and verify
extracted data</li>
</ol>
</div>
<div class="section level3">
<h3 id="process-a-single-document">Process a Single Document<a class="anchor" aria-label="anchor" href="#process-a-single-document"></a>
</h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/n8layman/ecoextract" class="external-link">ecoextract</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Process a single PDF through all steps</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/process_documents.html">process_documents</a></span><span class="op">(</span></span>
<span>  pdf_path <span class="op">=</span> <span class="st">"my_paper.pdf"</span>,</span>
<span>  db_conn <span class="op">=</span> <span class="st">"ecoextract_records.db"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check the results</span></span>
<span><span class="va">results</span></span></code></pre></div>
<p>This automatically handles: - OCR processing - Metadata extraction -
Data extraction with Claude - Saving to SQLite database</p>
</div>
<div class="section level3">
<h3 id="process-multiple-documents">Process Multiple Documents<a class="anchor" aria-label="anchor" href="#process-multiple-documents"></a>
</h3>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Process all PDFs in a folder</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/process_documents.html">process_documents</a></span><span class="op">(</span></span>
<span>  pdf_path <span class="op">=</span> <span class="st">"pdfs/"</span>,</span>
<span>  db_conn <span class="op">=</span> <span class="st">"ecoextract_records.db"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Process with refinement enabled</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/process_documents.html">process_documents</a></span><span class="op">(</span></span>
<span>  pdf_path <span class="op">=</span> <span class="st">"pdfs/"</span>,</span>
<span>  db_conn <span class="op">=</span> <span class="st">"ecoextract_records.db"</span>,</span>
<span>  run_refinement <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="parallel-processing">Parallel Processing<a class="anchor" aria-label="anchor" href="#parallel-processing"></a>
</h3>
<p>For faster processing of multiple documents, use parallel
processing:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install crew (optional dependency)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"crew"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Process with 4 parallel workers</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/process_documents.html">process_documents</a></span><span class="op">(</span></span>
<span>  pdf_path <span class="op">=</span> <span class="st">"pdfs/"</span>,</span>
<span>  db_conn <span class="op">=</span> <span class="st">"ecoextract_records.db"</span>,</span>
<span>  workers <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  log <span class="op">=</span> <span class="cn">TRUE</span>  <span class="co"># Creates timestamped log file</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Benefits: - Each worker processes a complete document -
Crash-resilient: completed documents saved immediately - Re-run to
resume: skip logic detects completed documents</p>
</div>
<div class="section level3">
<h3 id="smart-skip-logic">Smart Skip Logic<a class="anchor" aria-label="anchor" href="#smart-skip-logic"></a>
</h3>
<p>When you re-run <code><a href="../reference/process_documents.html">process_documents()</a></code>, it automatically
skips completed steps:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># First run - processes everything</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/process_documents.html">process_documents</a></span><span class="op">(</span><span class="st">"pdfs/"</span>, <span class="st">"records.db"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Second run - skips already completed steps</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/process_documents.html">process_documents</a></span><span class="op">(</span><span class="st">"pdfs/"</span>, <span class="st">"records.db"</span><span class="op">)</span></span></code></pre></div>
<p>This allows you to: - Resume interrupted batch processing - Add new
PDFs to an existing database - Re-run specific steps after fixing
issues</p>
</div>
</div>
<div class="section level2">
<h2 id="retrieving-your-data">Retrieving Your Data<a class="anchor" aria-label="anchor" href="#retrieving-your-data"></a>
</h2>
<p>After processing, use these functions to access your data:</p>
<div class="section level3">
<h3 id="query-records">Query Records<a class="anchor" aria-label="anchor" href="#query-records"></a>
</h3>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get all records from all documents</span></span>
<span><span class="va">all_records</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_records.html">get_records</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get records from a specific document</span></span>
<span><span class="va">doc_records</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_records.html">get_records</a></span><span class="op">(</span>document_id <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use a custom database path</span></span>
<span><span class="va">records</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_records.html">get_records</a></span><span class="op">(</span>db_conn <span class="op">=</span> <span class="st">"my_project.db"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="query-documents">Query Documents<a class="anchor" aria-label="anchor" href="#query-documents"></a>
</h3>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get all documents and their metadata</span></span>
<span><span class="va">all_docs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_documents.html">get_documents</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check processing status</span></span>
<span><span class="va">all_docs</span><span class="op">$</span><span class="va">ocr_status</span>          <span class="co"># "completed", "pending", "failed"</span></span>
<span><span class="va">all_docs</span><span class="op">$</span><span class="va">metadata_status</span></span>
<span><span class="va">all_docs</span><span class="op">$</span><span class="va">extraction_status</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="export-to-csv">Export to CSV<a class="anchor" aria-label="anchor" href="#export-to-csv"></a>
</h3>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get all records with metadata as a tibble</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/export_db.html">export_db</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Export to CSV file</span></span>
<span><span class="fu"><a href="../reference/export_db.html">export_db</a></span><span class="op">(</span>filename <span class="op">=</span> <span class="st">"extracted_data.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Simplified export (removes processing metadata columns)</span></span>
<span><span class="fu"><a href="../reference/export_db.html">export_db</a></span><span class="op">(</span>filename <span class="op">=</span> <span class="st">"clean_data.csv"</span>, simple <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>The exported data includes: - Document metadata (title, authors,
journal, DOI, etc.) - All extracted record fields (defined by your
schema) - Processing status and timestamps</p>
</div>
</div>
<div class="section level2">
<h2 id="human-review-workflow">Human Review Workflow<a class="anchor" aria-label="anchor" href="#human-review-workflow"></a>
</h2>
<p>After extraction, review and correct results using the
<strong>ecoreview</strong> Shiny app.</p>
<div class="section level3">
<h3 id="launch-the-review-app">Launch the Review App<a class="anchor" aria-label="anchor" href="#launch-the-review-app"></a>
</h3>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">ecoreview</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Launch the review app with your database</span></span>
<span><span class="fu">run_review_app</span><span class="op">(</span>db_path <span class="op">=</span> <span class="st">"ecoextract_records.db"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="using-the-review-app">Using the Review App<a class="anchor" aria-label="anchor" href="#using-the-review-app"></a>
</h3>
<p>The app provides:</p>
<ul>
<li>
<strong>Document-by-document review</strong> - Navigate through all
processed documents</li>
<li>
<strong>Side-by-side view</strong> - See OCR text and extracted
records together</li>
<li>
<strong>Edit records</strong> - Modify extracted data directly in
the app</li>
<li>
<strong>Add records</strong> - Manually add records the LLM
missed</li>
<li>
<strong>Delete records</strong> - Remove incorrect or duplicate
records</li>
<li>
<strong>Automatic audit trail</strong> - All edits tracked in
<code>record_edits</code> table</li>
</ul>
</div>
<div class="section level3">
<h3 id="review-workflow">Review Workflow<a class="anchor" aria-label="anchor" href="#review-workflow"></a>
</h3>
<ol style="list-style-type: decimal">
<li>
<strong>Process documents</strong> with EcoExtract</li>
<li>
<strong>Launch review app</strong> with your database</li>
<li>
<strong>Review each document</strong>:
<ul>
<li>Check extracted records against source text</li>
<li>Edit incorrect fields</li>
<li>Add missing records</li>
<li>Delete hallucinated records</li>
<li>Click “Accept” to save changes</li>
</ul>
</li>
<li>
<strong>Export final data</strong> with corrections</li>
</ol>
</div>
<div class="section level3">
<h3 id="complete-example">Complete Example<a class="anchor" aria-label="anchor" href="#complete-example"></a>
</h3>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 1. Process documents</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/process_documents.html">process_documents</a></span><span class="op">(</span></span>
<span>  pdf_path <span class="op">=</span> <span class="st">"papers/"</span>,</span>
<span>  db_conn <span class="op">=</span> <span class="st">"records.db"</span>,</span>
<span>  workers <span class="op">=</span> <span class="fl">4</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 2. Launch review app</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">ecoreview</span><span class="op">)</span></span>
<span><span class="fu">run_review_app</span><span class="op">(</span>db_path <span class="op">=</span> <span class="st">"records.db"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 3. Review and edit records in the Shiny app</span></span>
<span><span class="co">#    (Click through documents, make corrections, click "Accept")</span></span>
<span></span>
<span><span class="co"># 4. Export final data with edits</span></span>
<span><span class="va">final_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/export_db.html">export_db</a></span><span class="op">(</span></span>
<span>  db_conn <span class="op">=</span> <span class="st">"records.db"</span>,</span>
<span>  filename <span class="op">=</span> <span class="st">"final_data.csv"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 5. Check which records were edited</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="va">edited_records</span> <span class="op">&lt;-</span> <span class="va">final_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">human_edited</span> <span class="op">==</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Total records:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">final_data</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Edited records:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">edited_records</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="calculate-accuracy-metrics">Calculate Accuracy Metrics<a class="anchor" aria-label="anchor" href="#calculate-accuracy-metrics"></a>
</h2>
<p>After reviewing documents, calculate comprehensive accuracy
metrics:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate accuracy for all verified documents</span></span>
<span><span class="va">accuracy</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calculate_accuracy.html">calculate_accuracy</a></span><span class="op">(</span><span class="st">"records.db"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View key metrics</span></span>
<span><span class="va">accuracy</span><span class="op">$</span><span class="va">detection_recall</span>      <span class="co"># Did we find the records?</span></span>
<span><span class="va">accuracy</span><span class="op">$</span><span class="va">field_precision</span>       <span class="co"># How accurate were the fields?</span></span>
<span><span class="va">accuracy</span><span class="op">$</span><span class="va">field_f1</span>              <span class="co"># Overall field-level F1 score</span></span>
<span><span class="va">accuracy</span><span class="op">$</span><span class="va">major_edit_rate</span>       <span class="co"># How serious were the errors?</span></span>
<span><span class="va">accuracy</span><span class="op">$</span><span class="va">avg_edits_per_document</span> <span class="co"># Average corrections needed</span></span></code></pre></div>
<p>EcoExtract provides nuanced accuracy metrics that separate:</p>
<ul>
<li>
<strong>Record detection</strong>: Finding records vs
missing/hallucinating them</li>
<li>
<strong>Field-level accuracy</strong>: Correctness of individual
fields (gives partial credit)</li>
<li>
<strong>Edit severity</strong>: Major edits (unique/required fields)
vs minor edits</li>
</ul>
<p>For a complete explanation, see the <a href="../ACCURACY.html">ACCURACY.md</a> guide.</p>
<p>Accuracy visualizations (confusion matrices, heatmaps) are available
in the ecoreview Shiny app.</p>
</div>
<div class="section level2">
<h2 id="best-practices">Best Practices<a class="anchor" aria-label="anchor" href="#best-practices"></a>
</h2>
<div class="section level3">
<h3 id="start-small">1. Start Small<a class="anchor" aria-label="anchor" href="#start-small"></a>
</h3>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Test on 2-3 papers first</span></span>
<span><span class="va">test_files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"paper1.pdf"</span>, <span class="st">"paper2.pdf"</span>, <span class="st">"paper3.pdf"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/process_documents.html">process_documents</a></span><span class="op">(</span></span>
<span>  pdf_path <span class="op">=</span> <span class="va">test_files</span>,</span>
<span>  db_conn <span class="op">=</span> <span class="st">"test.db"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Review results before processing entire corpus</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/export_db.html">export_db</a></span><span class="op">(</span>db_conn <span class="op">=</span> <span class="st">"test.db"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="use-parallel-processing-for-large-batches">2. Use Parallel Processing for Large Batches<a class="anchor" aria-label="anchor" href="#use-parallel-processing-for-large-batches"></a>
</h3>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># For 10+ papers, use parallel processing</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/process_documents.html">process_documents</a></span><span class="op">(</span></span>
<span>  pdf_path <span class="op">=</span> <span class="st">"large_corpus/"</span>,</span>
<span>  db_conn <span class="op">=</span> <span class="st">"corpus.db"</span>,</span>
<span>  workers <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  log <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="enable-refinement-selectively">3. Enable Refinement Selectively<a class="anchor" aria-label="anchor" href="#enable-refinement-selectively"></a>
</h3>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Run refinement only on specific documents</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/process_documents.html">process_documents</a></span><span class="op">(</span></span>
<span>  pdf_path <span class="op">=</span> <span class="st">"pdfs/"</span>,</span>
<span>  db_conn <span class="op">=</span> <span class="st">"records.db"</span>,</span>
<span>  run_refinement <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5L</span>, <span class="fl">12L</span>, <span class="fl">18L</span><span class="op">)</span>  <span class="co"># Only these document IDs</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="review-early-and-often">4. Review Early and Often<a class="anchor" aria-label="anchor" href="#review-early-and-often"></a>
</h3>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Process a small batch</span></span>
<span><span class="fu"><a href="../reference/process_documents.html">process_documents</a></span><span class="op">(</span><span class="st">"batch1/"</span>, <span class="st">"records.db"</span>, workers <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Review immediately</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">ecoreview</span><span class="op">)</span></span>
<span><span class="fu">run_review_app</span><span class="op">(</span><span class="st">"records.db"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># This helps you catch systematic errors early</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="monitor-api-usage">5. Monitor API Usage<a class="anchor" aria-label="anchor" href="#monitor-api-usage"></a>
</h3>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Track usage at: https://console.anthropic.com/</span></span>
<span></span>
<span><span class="co"># Typical usage per paper:</span></span>
<span><span class="co"># - OCR: ~2,000-5,000 tokens (Tensorlake)</span></span>
<span><span class="co"># - Metadata: ~1,000-2,000 tokens (Claude)</span></span>
<span><span class="co"># - Extraction: ~5,000-10,000 tokens (Claude)</span></span>
<span><span class="co"># - Refinement: ~3,000-5,000 tokens (Claude)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="troubleshooting">Troubleshooting<a class="anchor" aria-label="anchor" href="#troubleshooting"></a>
</h2>
<div class="section level3">
<h3 id="api-key-not-found">API Key Not Found<a class="anchor" aria-label="anchor" href="#api-key-not-found"></a>
</h3>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Error: API key not found</span></span>
<span></span>
<span><span class="co"># Solution: Reload environment</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/readRenviron.html" class="external-link">readRenviron</a></span><span class="op">(</span><span class="st">".env"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Verify keys are set</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"ANTHROPIC_API_KEY"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"TENSORLAKE_API_KEY"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="database-locked-errors">Database Locked Errors<a class="anchor" aria-label="anchor" href="#database-locked-errors"></a>
</h3>
<p>If you get “database is locked” errors during parallel processing,
this usually resolves automatically due to EcoExtract’s busy timeout and
WAL mode configuration. If it persists:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dbi.r-dbi.org" class="external-link">DBI</a></span><span class="op">)</span></span>
<span><span class="va">db</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">dbConnect</a></span><span class="op">(</span><span class="fu">RSQLite</span><span class="fu">::</span><span class="fu"><a href="https://rsqlite.r-dbi.org/reference/SQLite.html" class="external-link">SQLite</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"records.db"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbGetQuery.html" class="external-link">dbGetQuery</a></span><span class="op">(</span><span class="va">db</span>, <span class="st">"PRAGMA journal_mode"</span><span class="op">)</span>  <span class="co"># Should return "wal"</span></span>
<span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbGetQuery.html" class="external-link">dbGetQuery</a></span><span class="op">(</span><span class="va">db</span>, <span class="st">"PRAGMA busy_timeout"</span><span class="op">)</span>   <span class="co"># Should return 30000</span></span>
<span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbDisconnect.html" class="external-link">dbDisconnect</a></span><span class="op">(</span><span class="va">db</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="ocr-failures">OCR Failures<a class="anchor" aria-label="anchor" href="#ocr-failures"></a>
</h3>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check which documents failed</span></span>
<span><span class="va">docs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_documents.html">get_documents</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">failed_docs</span> <span class="op">&lt;-</span> <span class="va">docs</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">ocr_status</span> <span class="op">!=</span> <span class="st">"completed"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">failed_docs</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Force reprocess failed OCR</span></span>
<span><span class="fu"><a href="../reference/process_documents.html">process_documents</a></span><span class="op">(</span></span>
<span>  pdf_path <span class="op">=</span> <span class="st">"pdfs/"</span>,</span>
<span>  db_conn <span class="op">=</span> <span class="st">"records.db"</span>,</span>
<span>  force_reprocess_ocr <span class="op">=</span> <span class="va">failed_docs</span><span class="op">$</span><span class="va">document_id</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="next-steps">Next Steps<a class="anchor" aria-label="anchor" href="#next-steps"></a>
</h2>
<p>Now that you know the basics, learn how to customize EcoExtract for
your specific domain:</p>
<ul>
<li>
<strong><a href="configuration.html">Configuration
Guide</a></strong> - Customize schema and prompts for your research
domain</li>
<li>
<strong><a href="ecoextract-workflow.html">Complete
Workflow</a></strong> - Comprehensive reference with all features</li>
<li>
<strong><a href="../ACCURACY.html">Accuracy Guide</a></strong> -
Understanding accuracy metrics in depth</li>
</ul>
<div class="section level3">
<h3 id="package-documentation">Package Documentation<a class="anchor" aria-label="anchor" href="#package-documentation"></a>
</h3>
<ul>
<li>
<code><a href="../reference/process_documents.html">?process_documents</a></code> - Main processing function</li>
<li>
<code><a href="../reference/get_records.html">?get_records</a></code> - Retrieve records from database</li>
<li>
<code><a href="../reference/export_db.html">?export_db</a></code> - Export data with options</li>
<li>
<code><a href="../reference/calculate_accuracy.html">?calculate_accuracy</a></code> - Accuracy metrics</li>
</ul>
</div>
<div class="section level3">
<h3 id="github-repositories">GitHub Repositories<a class="anchor" aria-label="anchor" href="#github-repositories"></a>
</h3>
<ul>
<li>
<a href="https://github.com/n8layman/ecoextract" class="external-link">ecoextract</a> -
Main extraction package</li>
<li>
<a href="https://github.com/n8layman/ecoreview" class="external-link">ecoreview</a> -
Review Shiny app</li>
<li>
<a href="https://github.com/n8layman/ohseer" class="external-link">ohseer</a> - OCR
package</li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Your Name.</p>
</div>

<div class="pkgdown-footer-right">
  <p>list(text = “EcoExtract - Structured ecological data extraction from scientific literature”)</p>
</div>

    </footer>
</div>





  
</body>
</html>
