% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils.R
\name{try_models_with_fallback}
\alias{try_models_with_fallback}
\title{Try multiple LLM models with fallback on refusal}
\usage{
try_models_with_fallback(
  models,
  system_prompt,
  context,
  schema,
  max_tokens = 16384,
  step_name = "LLM call"
)
}
\arguments{
\item{models}{Character vector of model names (e.g., c("anthropic/claude-sonnet-4-5", "mistral/mistral-large-latest"))}

\item{system_prompt}{System prompt for the LLM}

\item{context}{User context/input for the LLM}

\item{schema}{ellmer type schema for structured output}

\item{max_tokens}{Maximum tokens for response (default 16384)}

\item{step_name}{Name of the step for logging (default "LLM call")}
}
\value{
List with result (structured output), model_used (which model succeeded), and error_log (JSON string of failed attempts)
}
\description{
Attempts to get structured output from LLMs in sequential order.
If a model refuses (stop_reason == "refusal") or errors, tries the next model.
}
\keyword{internal}
